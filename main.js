!function(){"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",inputError:"popup__input_type_error",errorClass:"popup__input-error_active"},t=document.querySelector(".profile"),n=t.querySelector(".profile__avatar-wrap"),r=t.querySelector(".profile__edit"),o=t.querySelector(".profile__add"),i=document.querySelector(".popup_window_avatar").querySelector(".popup__form"),a=document.querySelector(".popup_window_edit"),c=a.querySelector(".popup__form"),u=a.querySelector(".popup__input_type_name"),s=a.querySelector(".popup__input_type_occupation"),l=document.querySelector(".popup_window_add").querySelector(".popup__form");function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r,o,i,a){var c=t.name,u=t.link,s=t.likes,l=t._id,f=t.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=c,this._src=u,this._alt="picture of "+c,this._likes=s,this._id=l,this._owner=f,this._cardSelector=n,this._userId=r,this._handleImageClick=o,this._handleDeleteClick=i,this._handleLikeClick=a}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector("#".concat(this._cardSelector)).content.querySelector(".".concat(this._cardSelector)).cloneNode(!0)}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._setEventListeners(),this._card.querySelector(".place__title").textContent=this._title,this._card.querySelector(".place__image").src=this._src,this._card.querySelector(".place__image").alt=this._alt,this._card.querySelector(".place__like-counter").textContent=this._likes.length,this._checkIfCardLiked(this._likes)&&this._toggleLikeCard(this._card.querySelector(".place__like")),this._hideDeleteBtn(),this._card}},{key:"_setEventListeners",value:function(){var e=this;this._card.addEventListener("click",(function(t){t.target.classList.contains("place__delete")?e._handleDeleteClick(e._id,e._card):t.target.classList.contains("place__like")?t.target.classList.contains("place__like_theme_like")?e._handleLikeClick(!1,t.target):e._handleLikeClick(!0,t.target):t.target.classList.contains("place__image")&&e._handleImageClick(t)}))}},{key:"_hideDeleteBtn",value:function(){this._owner._id!==this._userId&&(this._card.querySelector(".place__delete").style.display="none")}},{key:"_toggleLikeCard",value:function(e){e.classList.toggle("place__like_theme_like"),e.classList.toggle("place__like_theme_unlike")}},{key:"_checkIfCardLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"updateLikes",value:function(e,t){this._toggleLikeCard(t),this._card.querySelector(".place__like-counter").textContent=e}}])&&f(t.prototype,n),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){t._renderer(e)}))}}])&&h(t.prototype,n),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){var n=t.name,r=t.occupation,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._occupation=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._name.textContent,e.occupation=this._occupation.textContent,e.id=this._id,e}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.occupation,r=e.id;this._name.textContent=t,this._occupation.textContent=n,this._id=r}},{key:"setAvatar",value:function(e){this._avatar.src=e}}])&&_(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup__close")||!t.target.classList.contains("popup__container")&&t.target.classList.contains("popup"))&&e.close()}))}}])&&v(t.prototype,n),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},k(e,t,n||e)}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popup.querySelector(".popup__image"),t._description=t._popup.querySelector(".popup__description"),t}return t=a,(n=[{key:"open",value:function(e){k(E(a.prototype),"open",this).call(this),this._image.src=e.src,this._description.textContent=e.alt}}])&&g(t.prototype,n),a}(m);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},j(e,t,n||e)}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function I(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,n=e.popupSelector,r=e.formSubmitHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._formSubmitHandler=r,t._form=t._popup.querySelector(".popup__form"),t._submitButton=t._popup.querySelector(".popup__submit"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this._popup.querySelectorAll(".popup__input"),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;j(R(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmitHandler(e._getInputValues())}))}},{key:"close",value:function(){j(R(a.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Saving...":"Save"}}])&&O(t.prototype,n),a}(m);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},B(e,t,n||e)}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e){var t,n=e.popupSelector,r=e.deleteHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._deleteHandler=r,t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;B(A(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("click",(function(t){"Yes"==t.target.textContent&&e._deleteHandler(e._id,e._card)}))}},{key:"setDeleteCard",value:function(e,t){this._id=e,this._card=t}}])&&U(t.prototype,n),a}(m);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputError=t.inputError,this._errorClass=t.errorClass,this._formElement=n,this._inputList=this._formElement.querySelectorAll(this._inputSelector),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_showInputError",value:function(e){var t=this._getErrorElement(e);e.classList.add(this._inputError),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._getErrorElement(e);e.classList.remove(this._inputError),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_getErrorElement",value:function(e){return this._formElement.querySelector("#".concat(e.id,"-error"))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._inactiveButtonClass):this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"resetFormValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t),e._buttonElement.classList.add(e._inactiveButtonClass)}))}}])&&V(t.prototype,n),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"saveUserInfo",value:function(e,t){var n=this;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._checkResponse(e)}))}},{key:"saveCard",value:function(e,t){var n=this;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"updateProfilePicture",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}}])&&N(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"8c2c5758-c6d8-42fc-a2ad-abb452a760a2","Content-Type":"application/json"}}),z=M.getUserInfo(),Y=M.getInitialCards(),$=new y({name:".profile__name",occupation:".profile__occupation",avatar:".profile__avatar"}),G=new q({popupSelector:".popup_window_avatar",formSubmitHandler:function(e){G.renderLoading(!0),M.updateProfilePicture(e.link).then((function(){$.setAvatar(e.link),G.close()})).catch((function(e){console.log("There was a problem updating the avatar ".concat(e))})).finally((function(){G.renderLoading(!1)}))}}),K=new q({popupSelector:".popup_window_edit",formSubmitHandler:function(e){K.renderLoading(!0),M.saveUserInfo(e.name,e.occupation).then((function(){$.setUserInfo(e),K.close()})).catch((function(e){console.log("There was a problem updating profile information ".concat(e))})).finally((function(){K.renderLoading(!1)}))}}),Q=new q({popupSelector:".popup_window_add",formSubmitHandler:function(e){Q.renderLoading(!0),M.saveCard(e.name,e.link).then((function(e){ne.addItem(re(e)),Q.close()})).catch((function(e){console.log("There was a problem adding this place ".concat(e))})).finally((function(){Q.renderLoading(!1)}))}}),W=new H({popupSelector:".popup_window_delete",deleteHandler:function(e,t){M.deleteCard(e).then((function(){t.remove(),t=null,W.close()})).catch((function(e){console.log("There was a problem deleteing this place ".concat(e))}))}}),X=new L(".popup_window_image"),Z=new F(e,i),ee=new F(e,c),te=new F(e,l),ne=new d({renderer:function(e){ne.addItem(re(e))}},".places__list"),re=function(e){var t=new p(e,"place",$.getUserInfo().id,(function(e){X.open(e.target)}),(function(e,t){W.open(),W.setDeleteCard(e,t)}),(function(n,r){n?M.addLike(e._id).then((function(e){t.updateLikes(e.likes.length,r)})).catch((function(e){console.log("There was a problem adding the like ".concat(e))})):M.removeLike(e._id).then((function(e){t.updateLikes(e.likes.length,r)})).catch((function(e){console.log("There was a problem removing the like ".concat(e))}))}));return t.generateCard()};Promise.all([z,Y]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];$.setUserInfo({name:o.name,occupation:o.about,id:o._id}),$.setAvatar(o.avatar),ne.renderItems(i)})).catch((function(e){console.log("failed to load data from the server ".concat(e))})),G.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),W.setEventListeners(),X.setEventListeners(),Z.enableValidation(),ee.enableValidation(),te.enableValidation(),n.addEventListener("click",(function(){Z.resetFormValidation(),G.open()})),r.addEventListener("click",(function(){ee.resetFormValidation(),u.value=$.getUserInfo().name,s.value=$.getUserInfo().occupation,K.open()})),o.addEventListener("click",(function(){te.resetFormValidation(),Q.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQUEsSUFBTUEsRUFBYyxDQUNsQkMsYUFBYyxlQUNkQyxjQUFlLGdCQUNmQyxxQkFBc0IsaUJBQ3RCQyxvQkFBcUIseUJBQ3JCQyxXQUFZLDBCQUNaQyxXQUFZLDZCQUdSQyxFQUFVQyxTQUFTQyxjQUFjLFlBQ2pDQyxFQUFnQkgsRUFBUUUsY0FBYyx5QkFDdENFLEVBQWlCSixFQUFRRSxjQUFjLGtCQUN2Q0csRUFBY0wsRUFBUUUsY0FBYyxpQkFHcENJLEVBRGtCTCxTQUFTQyxjQUFjLHdCQUNIQSxjQUFjLGdCQUVwREssRUFBWU4sU0FBU0MsY0FBYyxzQkFDbkNNLEVBQWdCRCxFQUFVTCxjQUFjLGdCQUN4Q08sRUFBZ0JGLEVBQVVMLGNBQWMsMkJBQ3hDUSxFQUFzQkgsRUFBVUwsY0FBYyxpQ0FHOUNTLEVBRFdWLFNBQVNDLGNBQWMscUJBQ1ZBLGNBQWMsZ0IsMEtDdkJ2QlUsRUFBQUEsV0FLbkIsYUFFRUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsR0FDQSxJQU5FQyxFQU1GLEVBTkVBLEtBQU1DLEVBTVIsRUFOUUEsS0FBTUMsRUFNZCxFQU5jQSxNQUFPQyxFQU1yQixFQU5xQkEsSUFBS0MsRUFNMUIsRUFOMEJBLE8sNEZBTTFCLFNBQ0FDLEtBQUtDLE9BQVNOLEVBQ2RLLEtBQUtFLEtBQU9OLEVBQ1pJLEtBQUtHLEtBQU8sY0FBZ0JSLEVBQzVCSyxLQUFLSSxPQUFTUCxFQUNkRyxLQUFLRixJQUFNQSxFQUNYRSxLQUFLSyxPQUFTTixFQUNkQyxLQUFLTSxjQUFnQmhCLEVBQ3JCVSxLQUFLTyxRQUFVaEIsRUFDZlMsS0FBS1Esa0JBQW9CaEIsRUFDekJRLEtBQUtTLG1CQUFxQmhCLEVBQzFCTyxLQUFLVSxpQkFBbUJoQixFLGlEQUkxQixXQUlFLE9BSHFCaEIsU0FBU0MsY0FBVCxXQUEyQnFCLEtBQUtNLGdCQUFpQkssUUFDNUNoQyxjQUFiLFdBQStCcUIsS0FBS00sZ0JBQWlCTSxXQUFVLEssMEJBTTlFLFdBaUJFLE9BaEJBWixLQUFLYSxNQUFRYixLQUFLYyxlQUNsQmQsS0FBS2UscUJBRUxmLEtBQUthLE1BQU1sQyxjQUFjLGlCQUFpQnFDLFlBQWNoQixLQUFLQyxPQUM3REQsS0FBS2EsTUFBTWxDLGNBQWMsaUJBQWlCc0MsSUFBTWpCLEtBQUtFLEtBQ3JERixLQUFLYSxNQUFNbEMsY0FBYyxpQkFBaUJ1QyxJQUFNbEIsS0FBS0csS0FDckRILEtBQUthLE1BQU1sQyxjQUFjLHdCQUF3QnFDLFlBQWNoQixLQUFLSSxPQUFPZSxPQUd2RW5CLEtBQUtvQixrQkFBa0JwQixLQUFLSSxTQUM5QkosS0FBS3FCLGdCQUFnQnJCLEtBQUthLE1BQU1sQyxjQUFjLGlCQUloRHFCLEtBQUtzQixpQkFFRXRCLEtBQUthLFEsZ0NBSWQsV0FBcUIsV0FDbkJiLEtBQUthLE1BQU1VLGlCQUFpQixTQUFTLFNBQUNDLEdBQ2hDQSxFQUFJQyxPQUFPQyxVQUFVQyxTQUFTLGlCQUNoQyxFQUFLbEIsbUJBQW1CLEVBQUtYLElBQUssRUFBS2UsT0FDOUJXLEVBQUlDLE9BQU9DLFVBQVVDLFNBQVMsZUFDdkNILEVBQUlDLE9BQU9DLFVBQVVDLFNBQVMsMEJBQzFCLEVBQUtqQixrQkFBaUIsRUFBT2MsRUFBSUMsUUFDakMsRUFBS2Ysa0JBQWlCLEVBQU1jLEVBQUlDLFFBQzNCRCxFQUFJQyxPQUFPQyxVQUFVQyxTQUFTLGlCQUN2QyxFQUFLbkIsa0JBQWtCZ0IsUSw0QkFNN0IsV0FDTXhCLEtBQUtLLE9BQU9QLE1BQVFFLEtBQUtPLFVBQzNCUCxLQUFLYSxNQUFNbEMsY0FBYyxrQkFBa0JpRCxNQUFNQyxRQUFVLFUsNkJBTy9ELFNBQWdCQyxHQUNkQSxFQUFRSixVQUFVSyxPQUFPLDBCQUN6QkQsRUFBUUosVUFBVUssT0FBTyw4QiwrQkFJM0IsV0FBb0IsV0FDbEIsT0FBTy9CLEtBQUtJLE9BQU80QixNQUFLLFNBQUNDLEdBQ3ZCLE9BQU9BLEVBQUtuQyxNQUFRLEVBQUtTLGEseUJBTzdCLFNBQVlWLEVBQU8yQixHQUNqQnhCLEtBQUtxQixnQkFBZ0JHLEdBQ3JCeEIsS0FBS2EsTUFBTWxDLGNBQWMsd0JBQXdCcUMsWUFBY25CLE8sbUJBakc5Q1IsRywwS0NBQTZDLEVBQUFBLFdBS25CLGFBQTBCQyxHQUFtQixJQUEvQkMsRUFBK0IsRUFBL0JBLFUsNEZBQStCLFNBQzNDcEMsS0FBS3FDLFVBQVlELEVBQ2pCcEMsS0FBS3NDLFdBQWE1RCxTQUFTQyxjQUFjd0QsRyw0Q0FNM0MsU0FBUUksR0FDTnZDLEtBQUtzQyxXQUFXRSxRQUFRRCxLLHlCQUkxQixTQUFZRSxHQUFPLFdBQ2pCQSxFQUFNQyxVQUFVQyxTQUFRLFNBQUNDLEdBQ3ZCLEVBQUtQLFVBQVVPLFcsbUJBcEJBVixHLDBLQ0FBVyxFQUFBQSxXQUtuQixjQUEwQyxJQUE1QmxELEVBQTRCLEVBQTVCQSxLQUFNbUQsRUFBc0IsRUFBdEJBLFdBQVlDLEVBQVUsRUFBVkEsUSw0RkFBVSxTQUN4Qy9DLEtBQUtnRCxNQUFRdEUsU0FBU0MsY0FBY2dCLEdBQ3BDSyxLQUFLaUQsWUFBY3ZFLFNBQVNDLGNBQWNtRSxHQUMxQzlDLEtBQUtrRCxRQUFVeEUsU0FBU0MsY0FBY29FLEcsZ0RBSXhDLFdBQ0UsSUFBTUksRUFBTSxHQUtaLE9BSkFBLEVBQUcsS0FBV25ELEtBQUtnRCxNQUFNaEMsWUFDekJtQyxFQUFHLFdBQWlCbkQsS0FBS2lELFlBQVlqQyxZQUNyQ21DLEVBQUcsR0FBU25ELEtBQUtGLElBRVZxRCxJLHlCQU9ULFlBQXNDLElBQXhCeEQsRUFBd0IsRUFBeEJBLEtBQU1tRCxFQUFrQixFQUFsQkEsV0FBWU0sRUFBTSxFQUFOQSxHQUM5QnBELEtBQUtnRCxNQUFNaEMsWUFBY3JCLEVBQ3pCSyxLQUFLaUQsWUFBWWpDLFlBQWM4QixFQUMvQjlDLEtBQUtGLElBQU1zRCxJLHVCQU1iLFNBQVVDLEdBQ1JyRCxLQUFLa0QsUUFBUWpDLElBQU1vQyxPLG1CQW5DRlIsRywwS0NBQVMsRUFBQUEsV0FJbkIsV0FBWUMsR0FBZSxJLElBQUEsUSw0RkFBQSxTLEVBbUJULFNBQUMvQixHQUNELFdBQVpBLEVBQUlnQyxLQUNOLEVBQUtDLFUsRUFyQmtCLDBCLHNCQUFBLEssdURBQUEsSyxLQUN6QnpELEtBQUswRCxPQUFTaEYsU0FBU0MsY0FBYzRFLEcseUNBSXZDLFdBQ0V2RCxLQUFLMEQsT0FBT2hDLFVBQVVpQyxJQUFJLGdCQUMxQmpGLFNBQVM2QyxpQkFBaUIsVUFBV3ZCLEtBQUs0RCxtQixtQkFJNUMsV0FDRTVELEtBQUswRCxPQUFPaEMsVUFBVW1DLE9BQU8sZ0JBQzdCbkYsU0FBU29GLG9CQUFvQixVQUFXOUQsS0FBSzRELG1CLCtCQWEvQyxXQUFvQixXQUNsQjVELEtBQUswRCxPQUFPbkMsaUJBQWlCLFNBQVMsU0FBQ0MsSUFFakNBLEVBQUlDLE9BQU9DLFVBQVVDLFNBQVMsa0JBRXRCSCxFQUFJQyxPQUFPQyxVQUFVQyxTQUFTLHFCQUF1QkgsRUFBSUMsT0FBT0MsVUFBVUMsU0FBUyxXQUQ3RixFQUFLOEIsZ0IsbUJBbENRSCxHLGdzQ0NFQVMsRUFBQUEsU0FBQUEsSSwwb0JBSW5CLFdBQVlSLEdBQWUsYSw0RkFBQSxVQUN6QixjQUFNQSxJQUNEUyxPQUFTLEVBQUtOLE9BQU8vRSxjQUFjLGlCQUN4QyxFQUFLc0YsYUFBZSxFQUFLUCxPQUFPL0UsY0FBYyx1QkFIckIsRSxpQ0FTM0IsU0FBS3VGLEdBQ0gseUNBQ0FsRSxLQUFLZ0UsT0FBTy9DLElBQU1pRCxFQUFNakQsSUFDeEJqQixLQUFLaUUsYUFBYWpELFlBQWNrRCxFQUFNaEQsUyxtQkFoQnJCNkMsQ0FBdUJULEcsZ3NDQ0F2QmEsRUFBQUEsU0FBQUEsSSwwb0JBS25CLGNBQWtELE1BQXBDWixFQUFvQyxFQUFwQ0EsY0FBZWEsRUFBcUIsRUFBckJBLGtCQUFxQixPLDRGQUFBLFVBQ2hELGNBQU1iLElBQ0RjLG1CQUFxQkQsRUFDMUIsRUFBS0UsTUFBUSxFQUFLWixPQUFPL0UsY0FBYyxnQkFDdkMsRUFBSzRGLGNBQWdCLEVBQUtiLE9BQU8vRSxjQUFjLGtCQUpDLEUsNENBUWxELFdBQ0UsSUFBTTZGLEVBQVl4RSxLQUFLMEQsT0FBT2UsaUJBQWlCLGlCQUN6Q3RCLEVBQU0sR0FLWixPQUhBcUIsRUFBVTdCLFNBQVEsU0FBQytCLEdBQ2pCdkIsRUFBSXVCLEVBQU0vRSxNQUFRK0UsRUFBTUMsU0FFbkJ4QixJLCtCQUlULFdBQW9CLFdBQ2xCLHNEQUNBbkQsS0FBS3NFLE1BQU0vQyxpQkFBaUIsVUFBVSxTQUFDQyxHQUNyQ0EsRUFBSW9ELGlCQUVKLEVBQUtQLG1CQUFtQixFQUFLUSx3QixtQkFLakMsV0FDRSwwQ0FDQTdFLEtBQUtzRSxNQUFNUSxVLDJCQU1iLFNBQWNDLEdBRVYvRSxLQUFLdUUsY0FBY3ZELFlBRGpCK0QsRUFDK0IsWUFFQSxZLG1CQTlDbEJaLENBQXNCYixHLGdzQ0NBdEIwQixFQUFBQSxTQUFBQSxJLDBvQkFLbkIsY0FBOEMsTUFBaEN6QixFQUFnQyxFQUFoQ0EsY0FBZTBCLEVBQWlCLEVBQWpCQSxjQUFpQixPLDRGQUFBLFVBQzVDLGNBQU0xQixJQUNEMkIsZUFBaUJELEVBRnNCLEUsOENBTTlDLFdBQW9CLFdBQ2xCLHNEQUNBakYsS0FBSzBELE9BQU9uQyxpQkFBaUIsU0FBUyxTQUFDQyxHQUNQLE9BQTFCQSxFQUFJQyxPQUFPVCxhQUNiLEVBQUtrRSxlQUFlLEVBQUtwRixJQUFLLEVBQUtlLFksMkJBU3pDLFNBQWN1QyxFQUFJK0IsR0FDaEJuRixLQUFLRixJQUFNc0QsRUFDWHBELEtBQUthLE1BQVFzRSxPLG1CQTFCSUgsQ0FBeUIxQixHLDBLQ0Z6QjhCLEVBQUFBLFdBTW5CLFdBQVlDLEVBQVVDLEksNEZBQWEsU0FDakN0RixLQUFLdUYsY0FBZ0JGLEVBQVNsSCxhQUM5QjZCLEtBQUt3RixlQUFpQkgsRUFBU2pILGNBQy9CNEIsS0FBS3lGLHNCQUF3QkosRUFBU2hILHFCQUN0QzJCLEtBQUswRixxQkFBdUJMLEVBQVMvRyxvQkFDckMwQixLQUFLMkYsWUFBY04sRUFBUzlHLFdBQzVCeUIsS0FBSzRGLFlBQWNQLEVBQVM3RyxXQUM1QndCLEtBQUs2RixhQUFlUCxFQUNwQnRGLEtBQUs4RixXQUFhOUYsS0FBSzZGLGFBQWFwQixpQkFBaUJ6RSxLQUFLd0YsZ0JBQzFEeEYsS0FBSytGLGVBQWlCL0YsS0FBSzZGLGFBQWFsSCxjQUFjcUIsS0FBS3lGLHVCLHFEQUk3RCxXQUNFekYsS0FBS2UsdUIsNkJBTVAsU0FBZ0JpRixHQUVkLElBQU1DLEVBQWVqRyxLQUFLa0csaUJBQWlCRixHQUMzQ0EsRUFBYXRFLFVBQVVpQyxJQUFJM0QsS0FBSzJGLGFBRWhDTSxFQUFhakYsWUFBY2dGLEVBQWFHLGtCQUV4Q0YsRUFBYXZFLFVBQVVpQyxJQUFJM0QsS0FBSzRGLGUsNkJBTWxDLFNBQWdCSSxHQUVkLElBQU1DLEVBQWVqRyxLQUFLa0csaUJBQWlCRixHQUUzQ0EsRUFBYXRFLFVBQVVtQyxPQUFPN0QsS0FBSzJGLGFBRW5DTSxFQUFhdkUsVUFBVW1DLE9BQU83RCxLQUFLNEYsYUFFbkNLLEVBQWFqRixZQUFjLEssOEJBTTdCLFNBQWlCZ0YsR0FFZixPQURxQmhHLEtBQUs2RixhQUFhbEgsY0FBbEIsV0FBb0NxSCxFQUFhNUMsR0FBakQsYSxzQkFPdkIsU0FBUzRDLEdBRUZBLEVBQWFJLFNBQVNDLE1BR3pCckcsS0FBS3NHLGdCQUFnQk4sR0FGckJoRyxLQUFLdUcsZ0JBQWdCUCxLLDhCQVN6QixXQUNFLE9BQU9RLE1BQU1DLEtBQUt6RyxLQUFLOEYsWUFBWTlELE1BQUssU0FBQzBDLEdBRXZDLE9BQVFBLEVBQU0wQixTQUFTQyxXLGdDQUszQixXQUVNckcsS0FBSzBHLG1CQUVQMUcsS0FBSytGLGVBQWVyRSxVQUFVaUMsSUFBSTNELEtBQUswRixzQkFHdkMxRixLQUFLK0YsZUFBZXJFLFVBQVVtQyxPQUFPN0QsS0FBSzBGLHdCLGdDQUs5QyxXQUFxQixXQUVuQjFGLEtBQUs4RixXQUFXbkQsU0FBUSxTQUFDcUQsR0FFdkJBLEVBQWF6RSxpQkFBaUIsU0FBUyxXQUNyQyxFQUFLb0YsU0FBU1gsR0FDZCxFQUFLWSw2QixpQ0FNWCxXQUFzQixXQUVwQjVHLEtBQUs4RixXQUFXbkQsU0FBUSxTQUFDcUQsR0FDdkIsRUFBS00sZ0JBQWdCTixHQUVyQixFQUFLRCxlQUFlckUsVUFBVWlDLElBQUksRUFBSytCLDhCLG1CQTlHeEJOLEcsZ1JDcUJyQixJQUFNeUIsRUFBTSxJQ3JCU0MsV0FLbkIsY0FBa0MsSUFBcEJDLEVBQW9CLEVBQXBCQSxRQUFTQyxFQUFXLEVBQVhBLFMsNEZBQVcsU0FDaENoSCxLQUFLaUgsU0FBV0YsRUFDaEIvRyxLQUFLa0gsU0FBV0YsRSxtREFHbEIsU0FBZUcsR0FDYixPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssVyx5QkFJdEMsV0FBYyxXQUNaLE9BQU9DLE1BQU16SCxLQUFLaUgsU0FBVyxZQUFhLENBQUVELFFBQVNoSCxLQUFLa0gsV0FBWVEsTUFBSyxTQUFDUCxHQUMxRSxPQUFPLEVBQUtRLGVBQWVSLFEsNkJBSy9CLFdBQWtCLFdBQ2hCLE9BQU9NLE1BQU16SCxLQUFLaUgsU0FBVyxTQUFVLENBQUVELFFBQVNoSCxLQUFLa0gsV0FBWVEsTUFBSyxTQUFDUCxHQUN2RSxPQUFPLEVBQUtRLGVBQWVSLFEsMEJBUS9CLFNBQWF4SCxFQUFNaUksR0FBTyxXQUN4QixPQUFPSCxNQUFNekgsS0FBS2lILFNBQVcsWUFBYSxDQUN4Q1ksT0FBUSxRQUNSYixRQUFTaEgsS0FBS2tILFNBQ2RZLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRXJJLEtBQU1BLEVBQU1pSSxNQUFPQSxNQUN6Q0YsTUFBSyxTQUFDUCxHQUNQLE9BQU8sRUFBS1EsZUFBZVIsUSxzQkFRL0IsU0FBU3hILEVBQU1DLEdBQU0sV0FDbkIsT0FBTzZILE1BQU16SCxLQUFLaUgsU0FBVyxTQUFVLENBQ3JDWSxPQUFRLE9BQ1JiLFFBQVNoSCxLQUFLa0gsU0FDZFksS0FBTUMsS0FBS0MsVUFBVSxDQUFFckksS0FBTUEsRUFBTUMsS0FBTUEsTUFDeEM4SCxNQUFLLFNBQUNQLEdBQ1AsT0FBTyxFQUFLUSxlQUFlUixRLHdCQU8vQixTQUFXYyxHQUFRLFdBQ2pCLE9BQU9SLE1BQU16SCxLQUFLaUgsU0FBVyxVQUFZZ0IsRUFBUSxDQUMvQ0osT0FBUSxTQUNSYixRQUFTaEgsS0FBS2tILFdBQ2JRLE1BQUssU0FBQ1AsR0FDUCxPQUFPLEVBQUtRLGVBQWVSLFEscUJBTy9CLFNBQVFjLEdBQVEsV0FDZCxPQUFPUixNQUFNekgsS0FBS2lILFNBQVcsZ0JBQWtCZ0IsRUFBUSxDQUNyREosT0FBUSxNQUNSYixRQUFTaEgsS0FBS2tILFdBQ2JRLE1BQUssU0FBQ1AsR0FDUCxPQUFPLEVBQUtRLGVBQWVSLFEsd0JBTy9CLFNBQVdjLEdBQVEsV0FDakIsT0FBT1IsTUFBTXpILEtBQUtpSCxTQUFXLGdCQUFrQmdCLEVBQVEsQ0FDckRKLE9BQVEsU0FDUmIsUUFBU2hILEtBQUtrSCxXQUNiUSxNQUFLLFNBQUNQLEdBQ1AsT0FBTyxFQUFLUSxlQUFlUixRLGtDQU8vQixTQUFxQnZILEdBQU0sV0FDekIsT0FBTzZILE1BQU16SCxLQUFLaUgsU0FBVyxtQkFBb0IsQ0FDL0NZLE9BQVEsUUFDUmIsUUFBU2hILEtBQUtrSCxTQUNkWSxLQUFNQyxLQUFLQyxVQUFVLENBQUVqRixPQUFRbkQsTUFDOUI4SCxNQUFLLFNBQUNQLEdBQ1AsT0FBTyxFQUFLUSxlQUFlUixXLG1CQXhHWkwsR0RxQlQsQ0FBUSxDQUNsQkMsUUFBUyw4Q0FDVEMsUUFBUyxDQUNQa0IsY0FBZSx1Q0FDZixlQUFnQixzQkFJZEMsRUFBa0J0QixFQUFJdUIsY0FDdEJDLEVBQXNCeEIsRUFBSXlCLGtCQUUxQkMsRUFBVyxJQUFJMUYsRUFBUyxDQUM1QmxELEtBQU0saUJBQ05tRCxXQUFZLHVCQUNaQyxPQUFRLHFCQUdKeUYsRUFBa0IsSUFBSXJFLEVBQWMsQ0FDeENaLGNBQWUsdUJBQ2ZhLGtCQUFtQixTQUFDTSxHQUNsQjhELEVBQWdCQyxlQUFjLEdBQzlCNUIsRUFDRzZCLHFCQUFxQmhFLEVBQU05RSxNQUMzQjhILE1BQUssV0FDSmEsRUFBU0ksVUFBVWpFLEVBQU05RSxNQUN6QjRJLEVBQWdCL0UsV0FFakJtRixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQVIsa0RBQXVERixPQUV4REcsU0FBUSxXQUNQUixFQUFnQkMsZUFBYyxTQUloQ1EsRUFBbUIsSUFBSTlFLEVBQWMsQ0FDekNaLGNBQWUscUJBQ2ZhLGtCQUFtQixTQUFDOEUsR0FDbEJELEVBQWlCUixlQUFjLEdBQy9CNUIsRUFDR3NDLGFBQWFELEVBQUt2SixLQUFNdUosRUFBS3BHLFlBQzdCNEUsTUFBSyxXQUNKYSxFQUFTYSxZQUFZRixHQUNyQkQsRUFBaUJ4RixXQUVsQm1GLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBUiwyREFBZ0VGLE9BRWpFRyxTQUFRLFdBQ1BDLEVBQWlCUixlQUFjLFNBSWpDWSxFQUFnQixJQUFJbEYsRUFBYyxDQUN0Q1osY0FBZSxvQkFDZmEsa0JBQW1CLFNBQUM4RSxHQUNsQkcsRUFBY1osZUFBYyxHQUM1QjVCLEVBQ0d5QyxTQUFTSixFQUFLdkosS0FBTXVKLEVBQUt0SixNQUN6QjhILE1BQUssU0FBQzZCLEdBQ0xDLEdBQVlDLFFBQVFDLEdBQVdILElBQy9CRixFQUFjNUYsV0FFZm1GLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBUixnREFBcURGLE9BRXRERyxTQUFRLFdBQ1BLLEVBQWNaLGVBQWMsU0FJOUJrQixFQUFtQixJQUFJM0UsRUFBaUIsQ0FDNUN6QixjQUFlLHVCQUNmMEIsY0FBZSxTQUFDN0IsRUFBSStCLEdBQ2xCMEIsRUFDRytDLFdBQVd4RyxHQUNYc0UsTUFBSyxXQUNKdkMsRUFBS3RCLFNBQ0xzQixFQUFPLEtBQ1B3RSxFQUFpQmxHLFdBRWxCbUYsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFSLG1EQUF3REYsVUFLMURnQixFQUFhLElBQUk5RixFQUFlLHVCQUVoQytGLEVBQTBCLElBQUkxRSxFQUFjbEgsRUFBYWEsR0FDekRnTCxHQUEyQixJQUFJM0UsRUFBY2xILEVBQWFlLEdBQzFEK0ssR0FBd0IsSUFBSTVFLEVBQWNsSCxFQUFha0IsR0FHdkRvSyxHQUFjLElBQUl0SCxFQUN0QixDQUNFRSxTQUFVLFNBQUNRLEdBQ1Q0RyxHQUFZQyxRQUFRQyxHQUFXOUcsTUFHbkMsaUJBTUk4RyxHQUFhLFNBQUNSLEdBQ2xCLElBQU0vRCxFQUFPLElBQUk5RixFQUNmNkosRUFDQSxRQUNBWCxFQUFTSCxjQUFjaEYsSUFDdkIsU0FBQzVCLEdBQ0NxSSxFQUFXSSxLQUFLekksRUFBSUMsV0FFdEIsU0FBQzJCLEVBQUkrQixHQUNId0UsRUFBaUJNLE9BQ2pCTixFQUFpQk8sY0FBYzlHLEVBQUkrQixNQUVyQyxTQUFDbEQsRUFBTVQsR0FDSlMsRUFTRzRFLEVBQ0dzRCxRQUFRakIsRUFBS3BKLEtBQ2I0SCxNQUFLLFNBQUM2QixHQUNMcEUsRUFBS2lGLFlBQVliLEVBQU8xSixNQUFNc0IsT0FBUUssTUFFdkNvSCxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQVIsOENBQW1ERixPQWR2RGhDLEVBQ0d3RCxXQUFXbkIsRUFBS3BKLEtBQ2hCNEgsTUFBSyxTQUFDNkIsR0FDTHBFLEVBQUtpRixZQUFZYixFQUFPMUosTUFBTXNCLE9BQVFLLE1BRXZDb0gsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFSLGdEQUFxREYsVUFjakUsT0FGaUIxRCxFQUFLbUYsZ0JBYXhCaEQsUUFBUWlELElBQUksQ0FBQ3BDLEVBQWlCRSxJQUMzQlgsTUFBSyxZQUF1QixJLElBQUEsRyxFQUFBLEUsNENBQUEsSSxneEJBQXJCOEMsRUFBcUIsS0FBWEMsRUFBVyxLQUMzQmxDLEVBQVNhLFlBQVksQ0FBRXpKLEtBQU02SyxFQUFTN0ssS0FBTW1ELFdBQVkwSCxFQUFTNUMsTUFBT3hFLEdBQUlvSCxFQUFTMUssTUFDckZ5SSxFQUFTSSxVQUFVNkIsRUFBU3pILFFBRTVCeUcsR0FBWWtCLFlBQVlELE1BRXpCN0IsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFSLDhDQUFtREYsT0FJdkRMLEVBQWdCbUMsb0JBQ2hCMUIsRUFBaUIwQixvQkFDakJ0QixFQUFjc0Isb0JBQ2RoQixFQUFpQmdCLG9CQUNqQmQsRUFBV2Msb0JBR1hiLEVBQXdCYyxtQkFDeEJiLEdBQXlCYSxtQkFDekJaLEdBQXNCWSxtQkFHdEJoTSxFQUFjMkMsaUJBQWlCLFNBQVMsV0FDdEN1SSxFQUF3QmUsc0JBQ3hCckMsRUFBZ0J5QixVQUdsQnBMLEVBQWUwQyxpQkFBaUIsU0FBUyxXQUN2Q3dJLEdBQXlCYyxzQkFuQ3pCM0wsRUFBY3lGLE1BQVE0RCxFQUFTSCxjQUFjekksS0FDN0NSLEVBQW9Cd0YsTUFBUTRELEVBQVNILGNBQWN0RixXQW9DbkRtRyxFQUFpQmdCLFVBR25CbkwsRUFBWXlDLGlCQUFpQixTQUFTLFdBQ3BDeUksR0FBc0JhLHNCQUN0QnhCLEVBQWNZLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtbWFpbi8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC1tYWluLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtbWFpbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2lkdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC1tYWluLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LW1haW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC1tYWluLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZvcm1TZXR0aW5nID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3I6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IGVkaXRBdmF0YXJCdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLXdyYXBcIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XHJcbmNvbnN0IGFkZFBsYWNlQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZFwiKTtcclxuXHJcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfd2luZG93X2F2YXRhclwiKTtcclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwRm9ybSA9IGF2YXRhckVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuY29uc3QgZWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF93aW5kb3dfZWRpdFwiKTtcclxuY29uc3QgZWRpdFBvcHVwRm9ybSA9IGVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5jb25zdCBlZGl0UG9wdXBOYW1lID0gZWRpdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgZWRpdFBvcHVwT2NjdXBhdGlvbiA9IGVkaXRQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX29jY3VwYXRpb25cIik7XHJcblxyXG5jb25zdCBhZGRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfd2luZG93X2FkZFwiKTtcclxuY29uc3QgYWRkUG9wdXBGb3JtID0gYWRkUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgZm9ybVNldHRpbmcsXHJcbiAgZWRpdFByb2ZpbGVCdG4sXHJcbiAgYWRkUGxhY2VCdG4sXHJcbiAgZWRpdFBvcHVwRm9ybSxcclxuICBlZGl0UG9wdXBOYW1lLFxyXG4gIGVkaXRQb3B1cE9jY3VwYXRpb24sXHJcbiAgYWRkUG9wdXBGb3JtLFxyXG4gIGVkaXRBdmF0YXJCdG4sXHJcbiAgYXZhdGFyRWRpdFBvcHVwRm9ybSxcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgLyoqIGNvbnN0cnVjdG9yIG9mIENhcmQgY2xhc3MuXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBuZXcgY2FyZCBkYXRhLCB0ZXh0IGFuZCBhIGxpbmsgdG8gdGhlIGltYWdlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYXJkU2VsZWN0b3IgLSB0aGUgc2VsZWN0b3Igb2YgdGhlIHRlbXBsYXRlIGVsZW1udCBvZiBhIGNhcmQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIGxpa2VzLCBfaWQsIG93bmVyIH0sXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICB1c2VySWQsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2tcclxuICApIHtcclxuICAgIHRoaXMuX3RpdGxlID0gbmFtZTtcclxuICAgIHRoaXMuX3NyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9hbHQgPSBcInBpY3R1cmUgb2YgXCIgKyBuYW1lO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSBuZXcgdGVtcGxhdGUgY2FyZC4gKi9cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLl9jYXJkU2VsZWN0b3J9YCkuY29udGVudDtcclxuICAgIGNvbnN0IGNhcmQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fY2FyZFNlbGVjdG9yfWApLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZDtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyBhIG5ldyBjYXJkLiAqL1xyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX3NyYztcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9faW1hZ2VcIikuYWx0ID0gdGhpcy5fYWx0O1xyXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgLy8gY2hlY2tpbmcgaWYgdGhlIGNhcmQgaXMgYWxyZWFkeSBsaWtlIGFuZCB0b2dnbGUgdGhlIGxpa2UgYnV0dG9uIHN0YXRlIGFjY29yZGluZ2x5LlxyXG4gICAgaWYgKHRoaXMuX2NoZWNrSWZDYXJkTGlrZWQodGhpcy5fbGlrZXMpKSB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUxpa2VDYXJkKHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZVwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIGNhcmQgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoZSB1c2VyIHRoZSBkZWxldGUgYnV0dG9uIHdpbGwgYmUgaGlkZGVuLlxyXG4gICAgdGhpcy5faGlkZURlbGV0ZUJ0bigpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gaW5zdGFsbHMgZXZlbnQgbGlzdGVuZXIgdG8gYSBuZXcgY2FyZC4gKi9cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBsYWNlX19kZWxldGVcIikpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCwgdGhpcy5fY2FyZCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwbGFjZV9fbGlrZVwiKSkge1xyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGxhY2VfX2xpa2VfdGhlbWVfbGlrZVwiKVxyXG4gICAgICAgICAgPyB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soZmFsc2UsIGV2dC50YXJnZXQpXHJcbiAgICAgICAgICA6IHRoaXMuX2hhbmRsZUxpa2VDbGljayh0cnVlLCBldnQudGFyZ2V0KTtcclxuICAgICAgfSBlbHNlIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBsYWNlX19pbWFnZVwiKSkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soZXZ0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBoaWRlcyB0aGUgZGVsZXRlIGJ1dHRvbiBpZiB0aGUgY3VycmVudCBjYXJkIHdhcyBub3QgY3JlYXRlZCBieSB0aGUgdXNlci4gKi9cclxuICBfaGlkZURlbGV0ZUJ0bigpIHtcclxuICAgIGlmICh0aGlzLl9vd25lci5faWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX2RlbGV0ZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiB0b2dnbGVzIHRoZSBsaWtlIGJ1dHRvbidzIHRoZW1lLlxyXG4gICAqIEBwYXJhbSBsaWtlQnRuIC0gdGhlIGVsZW1lbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIF90b2dnbGVMaWtlQ2FyZChsaWtlQnRuKSB7XHJcbiAgICBsaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJwbGFjZV9fbGlrZV90aGVtZV9saWtlXCIpO1xyXG4gICAgbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwicGxhY2VfX2xpa2VfdGhlbWVfdW5saWtlXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gY2hlY2tzIGlmIHRoZSBjYXJkIGlzIGFscmVkeSBsaWtlZC4gKi9cclxuICBfY2hlY2tJZkNhcmRMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiB7XHJcbiAgICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiB1cGRhdGVzIHRoZSBudW1iZXIgb2YgbGlrZXMgb2YgdGhlIGNhcmQuXHJcbiAgICogQHBhcmFtIGxpa2VzIC0gdXAgdG8gZGF0ZSBjYXJkJ3MgbGlrZXMuXHJcbiAgICovXHJcbiAgdXBkYXRlTGlrZXMobGlrZXMsIGV2dCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlTGlrZUNhcmQoZXZ0KTtcclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZV9fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID0gbGlrZXM7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIC8qKiBjb25zdHJ1Y3RvciBvZiBTZWN0aW9uIGNsYXNzLlxyXG4gICAqIEBwYXJhbSB7cmVuZGVyZXJ9IC0gZnVuY3Rpb24gcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGFuZCByZW5kZXJpbmcgZGF0YSBvbiBhIHBhZ2UuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhcmRTZWxlY3RvciAtICBDU1MgY2xhc3Mgc2VsZWN0b3Igb2YgYSBjb250YWluZXIgdG8gYWRkIGVsZW1ldHMgdG8uXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gdGFrZXMgYSBET00gZWxlbWVudCBhbmQgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyLlxyXG4gICAqIEBwYXJhbSBldnQgLSB0aGUgZWxlbWVudCB0byBiZSBhZGRlZC5cclxuICAgKi9cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gd2lsbCByZW5kZXIgZWFjaCBlbGVtZW50IG9uIGEgcGFnZS4gKi9cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIC8qKiBjb25zdHJ1Y3RvciBvZiBDYXJkIGNsYXNzLlxyXG4gICAqIEBwYXJhbSBuYW1lIC0gY29udGFpbnMgdGhlIHVzZXIncyBuYW1lLlxyXG4gICAqIEBwYXJhbSBvY2N1cGF0aW9uIC0gY29udGFpbnMgdGhlIHVzZXIncyBqb2IuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBvY2N1cGF0aW9uLCBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9vY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvY2N1cGF0aW9uKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcclxuICB9XHJcblxyXG4gIC8qKiByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyLiAqL1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBvYmpbXCJuYW1lXCJdID0gdGhpcy5fbmFtZS50ZXh0Q29udGVudDtcclxuICAgIG9ialtcIm9jY3VwYXRpb25cIl0gPSB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50O1xyXG4gICAgb2JqW1wiaWRcIl0gPSB0aGlzLl9pZDtcclxuXHJcbiAgICByZXR1cm4gb2JqO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2UuXHJcbiAgICogQHBhcmFtIG5hbWUgLSBjb250YWlucyB0aGUgbmV3IHVzZXIncyBuYW1lLlxyXG4gICAqIEBwYXJhbSBvY2N1cGF0aW9uIC0gY29udGFpbnMgdGhlIG5ldyB1c2VyJ3Mgam9iLlxyXG4gICAqL1xyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgb2NjdXBhdGlvbiwgaWQgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50ID0gb2NjdXBhdGlvbjtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBzZXQgYSBuZXcgdXNlcidzIGF2YXRhci5cclxuICAgKiBAcGFyYW0gdXJsIC0gYSBsaW5rIHRvIHRoZSBuZXcgaW1hZ2UuXHJcbiAgICovXHJcbiAgc2V0QXZhdGFyKHVybCkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVybDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIC8qKiBjb25zdHJ1Y3RvciBvZiBDYXJkIGNsYXNzLlxyXG4gICAqIEBwYXJhbSBwb3B1cFNlbGVjdG9yIC0gQ3NzIHNlbGVjdG9yIG9mIGEgcG9wdXAuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gb3BlbnMgdGhlIHBvcHVwLiAqL1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gY2xvc2VzIHRoZSBwb3B1cC4gKi9cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvKiogc3RvcmVzIHRoZSBsb2dpYyBmb3IgY2xvc2luZyB0aGUgcG9wdXAgYnkgcHJlc3NpbmcgdGhlIEVzYyBrZXkuXHJcbiAgICogQHBhcmFtIGV2dCAtIHRoZSBrZXkgdGhhdCB0cmlnZ2VyZWQgdGhlIGV2ZW50LlxyXG4gICAqL1xyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBhZGRzIGEgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGNsb3NlIGljb24gb2YgdGhlIHBvcHVwLiAqL1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgLy8gaWYgdGhlIHVzZXIgY2xpY2tzIG9uIGNsb3NpbmcgYnV0dG9uXHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSBlbHNlIGlmICghZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY29udGFpbmVyXCIpICYmIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgICAvLyBpZiB0aGUgdXNlciBjbGlja3Mgb3V0c2lkZSB0aGUgcG9wdXAgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAvKiogY29uc3RydWN0b3Igb2YgUG9wdXBXaXRoSW1hZ2UgY2xhc3MuXHJcbiAgICogQHBhcmFtIHBvcHVwU2VsZWN0b3IgLSBDc3Mgc2VsZWN0b3Igb2YgYSBwb3B1cC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gb3BlbnMgdGhlIHBvcHVwLlxyXG4gICAqIEBwYXJhbSBpbWFnZSAtIHRoZSBpbWFnZSB0byBiZSBkaXNwbGF5ZWQuXHJcbiAgICovXHJcbiAgb3BlbihpbWFnZSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpbWFnZS5hbHQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAvKiogY29uc3RydWN0b3Igb2YgUG9wdXBXaXRoRm9ybSBjbGFzcy5cclxuICAgKiBAcGFyYW0gcG9wdXBTZWxlY3RvciAtIENzcyBzZWxlY3RvciBvZiBhIHBvcHVwLlxyXG4gICAqIEBwYXJhbSBmb3JtU3VibWl0SGFuZGxlciAtIGEgY2FsbGJhY2sgb2YgdGhlIGZvcm0gc3VibWlzc2lvbi5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRIYW5kbGVyIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0XCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gY29sbGVjdHMgZGF0YSBmcm9tIGFsbCB0aGUgaW5wdXQgZmllbGRzLiAqL1xyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcblxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIG9ialtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gYWRkcyBhIHN1Ym1pdCBldmVudCBsaXN0ZW5lci4gKi9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiByZXNldHMgdGhlIGZvcm0gb25jZSB0aGUgcG9wdXAgaXMgY2xvc2VkIC4qL1xyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIHJlbmRlcnMgc2F2aW5nIHN0YXRlIG1lc3NhZ2UgdG8gdGhlIHVzZXIgd2hpbGUgYSBmZXRjaCByZXF1ZXN0IGlzIGluIHByb2Nlc3MuXHJcbiAgICogKiBAcGFyYW0gaXNMb2FkaW5nIC0gdHJ1ZSAtIGlmIHRoZSBmZXRjaCByZXF1ZXN0IGlzIGluIHByb2Nlc3MsIGZhbHNlIC0gaWYgdGhlIGZldGNoIHJlcXVlc3QgZmluaXNoZWQuXHJcbiAgICovXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2lkdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLyoqIGNvbnN0cnVjdG9yIG9mIFBvcHVwV2l0aEZvcm0gY2xhc3MuXHJcbiAgICogQHBhcmFtIHBvcHVwU2VsZWN0b3IgLSBDc3Mgc2VsZWN0b3Igb2YgYSBwb3B1cC5cclxuICAgKiBAcGFyYW0gZGVsZXRlSGFuZGxlciAtIGEgY2FsbGJhY2sgb2YgdGhlIGNvbmZpcm0gYnV0dG9uLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgZGVsZXRlSGFuZGxlciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2RlbGV0ZUhhbmRsZXIgPSBkZWxldGVIYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gaW5zdGFsbHMgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHllcyBidXR0b24gb2YgdGhlIHBvcHVwLiAqL1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LnRleHRDb250ZW50ID09IFwiWWVzXCIpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVIYW5kbGVyKHRoaXMuX2lkLCB0aGlzLl9jYXJkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBzZXRzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBkZWxldGVkIGNhcmQuXHJcbiAgICogQHBhcmFtIGlkIC0gdGhlIGlkIG9mIHRoZSBjYXJkIHRvIGJlIGRlbGV0ZWQuXHJcbiAgICogQHBhcmFtIGNhcmQgLSB0aGUgY2FyZCBlbGVtZW50IHRvIGJlIGRlbGV0ZWQuXHJcbiAgICovXHJcbiAgc2V0RGVsZXRlQ2FyZChpZCwgY2FyZCkge1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAvKiogY29uc3RydWN0b3Igb2YgRm9ybVZhbGlkYXRvciBjbGFzc1xyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzZXR0aW5ncyAtIHN0b3JlcyBzZWxlY3RvcnMgYW5kIGZvcm0gY2xhc3Nlcy5cclxuICAgKiBAcGFyYW0ge2VsZW1lbnR9IGZvcm1FbGVtZW50IC0gdGhlIGZvcm0gZWxlbW50IHRvIGJlIHZhbGlkYXRlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvciA9IHNldHRpbmdzLmlucHV0RXJyb3I7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gc3RhcnRzIGEgZm9ybSB2YWxpZGF0aW9uLiAqL1xyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gc2hvd3MgYW4gZXJyb3IgbWVzc2FnZS5cclxuICAgKiBAcGFyYW0gaW5wdXRFbGVtZW50IC0gdGhlIGlucHV0IGVsZW1lbnQgdGhhdCBoYXMgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgLy8gZ2V0dGluZyB0aGUgZXJyb3JFbGVtZW50IGZyb20gSFRNTC5cclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICAvLyBzZXQgdGhlIGVycm9yIG1lc3NhZ2UgdG8gdGhlIHVzZXIuXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAvLyBkaXNwbGF5IHRoZSBlcnJvciBtZXNzYWdlIHRvIHRoZSB1c2VyLlxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBoaWRlcyBhbiBlcnJvciBtZXNzYWdlLlxyXG4gICAqIEBwYXJhbSBpbnB1dEVsZW1lbnQgLSB0aGUgaW5wdXQgZWxlbWVudCB0aGF0IGhhcyBhbiBlcnJvci5cclxuICAgKi9cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBnZXR0aW5nIHRoZSBlcnJvckVsZW1lbnQgZnJvbSBIVE1MLlxyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCk7XHJcbiAgICAvLyByZW1vdmluZyB0aGUgZXJyb3IgaGlnaGxpZ2h0IGZyb20gaW5wdXRcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3IpO1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBlcnJvciBtZXNzYWdlIHRvIHRoZSB1c2VyLlxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAvLyBjbGVhciB0aGUgZXJyb3IgbWVzc2FnZS5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGVycm9yIGVsZW1lbnQgd2hpY2ggYW4gZXJyb3IgbWVzc2FnZSB3aWxsIGJlIGRpc3BsYXllZCBpbi5cclxuICAgKiBAcGFyYW0gaW5wdXRFbGVtZW50IC0gdGhlIGlucHV0IGVsZW1lbnQgdGhhdCBoYXMgYW4gZXJyb3IuXHJcbiAgICovXHJcbiAgX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIHJldHVybiBlcnJvckVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBjaGVja3MgaWYgYSBnaXZlbiBpbnB1dCBmaWVsZCBpcyB2YWxpZC5cclxuICAgKiBAcGFyYW0gaW5wdXRFbGVtZW50IC0gdGhlIGlucHV0IHRvIGJlIGNoZWNrZWQuXHJcbiAgICovXHJcbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBjaGVja2luZyBpZiB0aGUgY3VycmVudCBpbnB1dCBpcyBub3cgaW52YWxpZC5cclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gY2hlY2tzIGEgbGlzdCBvZiBpbnB1dCBmaWVsZHMuXHJcbiAgICogQHBhcmFtIGlucHV0TGlzdCAtIHRoZSBsaXN0IG9mIGlucHV0IGZpZWxkcyB0byBiZSBjaGVja2VkLlxyXG4gICAqL1xyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaGFzIGludmFsaWQgaW5wdXQgZnVuY3Rpb24gcmV0dXJucyB0cnVlXHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIGVuYWJsZXMgb3IgZGlzYWJsZXMgYSBmb3JtJ3MgYnV0dG9ucyBhY2NvcmRpbmcgdG8gdGhlIHZhbGlkaXR5IG9mIHRoZSBmb3JtJ3MgaW5wdXQgZmllbGRzLiAqL1xyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIGlmIG9uZSBvZiB0aGUgZm9ybSdzIGlucHV0IGZpZWxkIGlzIGludmFsaWQuXHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgLy8gc2V0dGluZyB0aGUgYnV0dG9uIHRvIGJlIGluYWN0aXZlLlxyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBhbGwgdGhlIGZpZWxkIG9mIHRoZSBnaXZlbiBmb3JtIGFyZSB2YWxpZCwgdGhlIGJ1dHRvbiBpcyBhY3RpdmUuXHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qIHRoaXMgZnVuY3Rpb24gaW5zdGFsbHMgaW5wdXQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBmb3JtLiAqL1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIGl0ZXJhdGluZyB0aHJvdWdoIGlucHV0TGlzdFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAvLyBzZXR0aW5nIGlucHV0IGxpc3RlbmVyIHRvIGVhY2ggaW5wdXQgZmllbGQgaW4gaW5wdXRMaXN0XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyogdGhpcyBmdW5jdGlvbiByZXNldHMgdGhlIGlucHV0IGZpZWxkcyBvZiB0aGUgZm9ybS4gKi9cclxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkge1xyXG4gICAgLy8gaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIC8vIHJlc2V0aW5nIHRoZSBzdWJtaXQgYnV0dG9uIG9mIHRoZSBnaXZlbiBmb3JtLlxyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBmb3JtU2V0dGluZyxcbiAgZWRpdFByb2ZpbGVCdG4sXG4gIGFkZFBsYWNlQnRuLFxuICBlZGl0UG9wdXBGb3JtLFxuICBlZGl0UG9wdXBOYW1lLFxuICBlZGl0UG9wdXBPY2N1cGF0aW9uLFxuICBhZGRQb3B1cEZvcm0sXG4gIGVkaXRBdmF0YXJCdG4sXG4gIGF2YXRhckVkaXRQb3B1cEZvcm0sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaWR0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpZHRoRGVsZXRlLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjhjMmM1NzU4LWM2ZDgtNDJmYy1hMmFkLWFiYjQ1MmE3NjBhMlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHVzZXJJbmZvUHJvbWlzZSA9IGFwaS5nZXRVc2VySW5mbygpO1xuY29uc3QgaW5pdGlhbENhcmRzUHJvbWlzZSA9IGFwaS5nZXRJbml0aWFsQ2FyZHMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIG9jY3VwYXRpb246IFwiLnByb2ZpbGVfX29jY3VwYXRpb25cIixcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcbn0pO1xuXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwX3dpbmRvd19hdmF0YXJcIixcbiAgZm9ybVN1Ym1pdEhhbmRsZXI6IChpbnB1dCkgPT4ge1xuICAgIGF2YXRhckVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKGlucHV0LmxpbmspXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihpbnB1dC5saW5rKTtcbiAgICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhlIGF2YXRhciAke2Vycn1gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGF2YXRhckVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9LFxufSk7XG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF93aW5kb3dfZWRpdFwiLFxuICBmb3JtU3VibWl0SGFuZGxlcjogKGRhdGEpID0+IHtcbiAgICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuc2F2ZVVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5vY2N1cGF0aW9uKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHByb2ZpbGUgaW5mb3JtYXRpb24gJHtlcnJ9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sXG59KTtcbmNvbnN0IGFkZFBsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwX3dpbmRvd19hZGRcIixcbiAgZm9ybVN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XG4gICAgYWRkUGxhY2VQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgICAgLnNhdmVDYXJkKGRhdGEubmFtZSwgZGF0YS5saW5rKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBhZGRUb1BsYWNlcy5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzdWx0KSk7XG4gICAgICAgIGFkZFBsYWNlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgdGhpcyBwbGFjZSAke2Vycn1gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGFkZFBsYWNlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuY29uc3QgZGVsZXRlUGxhY2VQb3B1cCA9IG5ldyBQb3B1cFdpZHRoRGVsZXRlKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfd2luZG93X2RlbGV0ZVwiLFxuICBkZWxldGVIYW5kbGVyOiAoaWQsIGNhcmQpID0+IHtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgICBjYXJkID0gbnVsbDtcbiAgICAgICAgZGVsZXRlUGxhY2VQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSB3YXMgYSBwcm9ibGVtIGRlbGV0ZWluZyB0aGlzIHBsYWNlICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH0sXG59KTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF93aW5kb3dfaW1hZ2VcIik7XG5cbmNvbnN0IGF2YXRhckVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmcsIGF2YXRhckVkaXRQb3B1cEZvcm0pO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmcsIGVkaXRQb3B1cEZvcm0pO1xuY29uc3QgYWRkUGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmcsIGFkZFBvcHVwRm9ybSk7XG5cbi8qKiBhZGRzIGEgbmV3IHBsYWNlIHRvIHRoZSBwbGFjZXMgbGlzdCBpbiB0aGUgRE9NLiAqL1xuY29uc3QgYWRkVG9QbGFjZXMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgYWRkVG9QbGFjZXMuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgICB9LFxuICB9LFxuICBcIi5wbGFjZXNfX2xpc3RcIlxuKTtcblxuLyoqIHRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhIG5ldyBjYXJkLlxuICogQHBhcmFtIGRhdGEgLSBjb250YWlucyB0aGUgbGluayBhbmQgdGhlIG5hbWUgb2YgdGhlIG5ldyBjYXJkLlxuICovXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgXCJwbGFjZVwiLFxuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuaWQsXG4gICAgKGV2dCkgPT4ge1xuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGV2dC50YXJnZXQpO1xuICAgIH0sXG4gICAgKGlkLCBjYXJkKSA9PiB7XG4gICAgICBkZWxldGVQbGFjZVBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZVBsYWNlUG9wdXAuc2V0RGVsZXRlQ2FyZChpZCwgY2FyZCk7XG4gICAgfSxcbiAgICAobGlrZSwgZXZ0KSA9PiB7XG4gICAgICAhbGlrZVxuICAgICAgICA/IGFwaVxuICAgICAgICAgICAgLnJlbW92ZUxpa2UoZGF0YS5faWQpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzdWx0Lmxpa2VzLmxlbmd0aCwgZXZ0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgd2FzIGEgcHJvYmxlbSByZW1vdmluZyB0aGUgbGlrZSAke2Vycn1gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDogYXBpXG4gICAgICAgICAgICAuYWRkTGlrZShkYXRhLl9pZClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXN1bHQubGlrZXMubGVuZ3RoLCBldnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSB3YXMgYSBwcm9ibGVtIGFkZGluZyB0aGUgbGlrZSAke2Vycn1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgKTtcbiAgY29uc3QgbmV3UGxhY2UgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuXG4gIHJldHVybiBuZXdQbGFjZTtcbn07XG5cbi8qKiB0aGlzIGZ1bmN0aW9uIGhhbmRsZXMgdGhlIG9wZW5pbmcgb2YgdGhlIGVkaXQgcG9wdXAuICovXG5jb25zdCBvcGVuRWRpdFBvcFVwID0gKCkgPT4ge1xuICAvLyBvbmNlIHRoZSBmb3JtIG9wZW5lZCB0aGUgaW5wdXQgbmFtZSBhbmQgdGhlIGFib3V0IG1lIGFyZSBmaWxsZWQgd2l0aCB0aGUgcHJvZmlsZSBpbmZvLlxuICBlZGl0UG9wdXBOYW1lLnZhbHVlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKS5uYW1lO1xuICBlZGl0UG9wdXBPY2N1cGF0aW9uLnZhbHVlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKS5vY2N1cGF0aW9uO1xufTtcblxuLy8gaW5pdGlhbGl6aW5nIHVzZXIncyBpbmZvIGFuZCBwbGFjZXMgZnJvbSB0aGUgc2VydmVyLlxuUHJvbWlzZS5hbGwoW3VzZXJJbmZvUHJvbWlzZSwgaW5pdGlhbENhcmRzUHJvbWlzZV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogdXNlckRhdGEubmFtZSwgb2NjdXBhdGlvbjogdXNlckRhdGEuYWJvdXQsIGlkOiB1c2VyRGF0YS5faWQgfSk7XG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG5cbiAgICBhZGRUb1BsYWNlcy5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coYGZhaWxlZCB0byBsb2FkIGRhdGEgZnJvbSB0aGUgc2VydmVyICR7ZXJyfWApO1xuICB9KTtcblxuLy8gcG9wdXBzIGxpc3RlbmVycy5cbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkUGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlUGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBlbmFibGUgYWxsIGZvcm1zIHZhbGlkYXRpb24uXG5hdmF0YXJFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkUGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gYnV0dG9ucyBsaXN0ZW5lcnMuXG5lZGl0QXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhckVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTtcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRGb3JtVmFsaWRhdGlvbigpO1xuICBvcGVuRWRpdFBvcFVwKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbmFkZFBsYWNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBsYWNlRm9ybVZhbGlkYXRvci5yZXNldEZvcm1WYWxpZGF0aW9uKCk7XG4gIGFkZFBsYWNlUG9wdXAub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIC8qKiBjb25zdHJ1Y3RvciBvZiBBUEkgY2xhc3MuXHJcbiAgICogQHBhcmFtICBiYXNlVXJsIC0gdGhlIFVSTCB0byBtYWtlIHRoZSByZXF1ZXN0IHRvLlxyXG4gICAqIEBwYXJhbSBoZWFkZXJzICBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZXNvdXJjZSB0byBiZSBmZXRjaGVkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgbmFtZSBhbmQgdGhlIGFib3V0IGluZm9ybWF0aW9uIGZyb20gdGhlIHNlcnZlci4gKi9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBjYXJkcyBmcm9tIHRoZSBzZXJ2ZXIuICovXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIHNhdmVzIG5ldyB1c2VyIGluZm8gb24gdGhlIHNlcnZlcihuYW1lLCBhYm91dCkuXHJcbiAgICogQHBhcmFtICBuYW1lIC0gdGhlIG5ldyBuYW1lIHRvIGJlIHNhdmVkLlxyXG4gICAqIEBwYXJhbSBhYm91dCAtIHRoZSBuZXcgYWJvdXQgdG8gYmUgc2F2ZWQuXHJcbiAgICovXHJcbiAgc2F2ZVVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbmFtZSwgYWJvdXQ6IGFib3V0IH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIHNhdmVzIG5ldyBjYXJkIG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICogQHBhcmFtICBuYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG5ldyBjYXJkLlxyXG4gICAqIEBwYXJhbSBsaW5rIC0gbGluayB0byB0aGUgY2FyZCdzIGltYWdlLlxyXG4gICAqL1xyXG4gIHNhdmVDYXJkKG5hbWUsIGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIHRoaXMgZnVuY3Rpb24gZGVsZXRlcyBhIGNhcmQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAqIEBwYXJhbSAgY2FyZElkIC0gdGhlIGlkIG9mIHRoZSBkZWxldGVkIGNhcmQuXHJcbiAgICovXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHMvXCIgKyBjYXJkSWQsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKiB0aGlzIGZ1bmN0aW9uIGFkZCBhIGxpa2UgdG8gYSBjYXJkLlxyXG4gICAqIEBwYXJhbSAgY2FyZElkIC0gdGhlIGlkIG9mIHRoZSBsaWtlZCBjYXJkLlxyXG4gICAqL1xyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElkLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiByZW1vdmVzIGEgbGlrZSBmcm9tIGEgY2FyZC5cclxuICAgKiBAcGFyYW0gIGNhcmRJZCAtIHRoZSBpZCBvZiB0aGUgdW5saWtlZCBjYXJkLlxyXG4gICAqL1xyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElkLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGhpcyBmdW5jdGlvbiBzYXZlcyBhIHVzZXIncyBhdmF0YXIgb24gdGhlIHNlcnZlci5cclxuICAgKiBAcGFyYW0gIGxpbmsgLSBsaW5rIHRvIHRoZSBuZXcgYXZhdGFyJ3MgaW1hZ2UuXHJcbiAgICovXHJcbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGxpbmsgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZm9ybVNldHRpbmciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvciIsImVycm9yQ2xhc3MiLCJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdEF2YXRhckJ0biIsImVkaXRQcm9maWxlQnRuIiwiYWRkUGxhY2VCdG4iLCJhdmF0YXJFZGl0UG9wdXBGb3JtIiwiZWRpdFBvcHVwIiwiZWRpdFBvcHVwRm9ybSIsImVkaXRQb3B1cE5hbWUiLCJlZGl0UG9wdXBPY2N1cGF0aW9uIiwiYWRkUG9wdXBGb3JtIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJfaWQiLCJvd25lciIsInRoaXMiLCJfdGl0bGUiLCJfc3JjIiwiX2FsdCIsIl9saWtlcyIsIl9vd25lciIsIl9jYXJkU2VsZWN0b3IiLCJfdXNlcklkIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJsZW5ndGgiLCJfY2hlY2tJZkNhcmRMaWtlZCIsIl90b2dnbGVMaWtlQ2FyZCIsIl9oaWRlRGVsZXRlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic3R5bGUiLCJkaXNwbGF5IiwibGlrZUJ0biIsInRvZ2dsZSIsInNvbWUiLCJsaWtlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsInJldmVyc2UiLCJmb3JFYWNoIiwiaXRlbSIsIlVzZXJJbmZvIiwib2NjdXBhdGlvbiIsImF2YXRhciIsIl9uYW1lIiwiX29jY3VwYXRpb24iLCJfYXZhdGFyIiwib2JqIiwiaWQiLCJ1cmwiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsImFkZCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9kZXNjcmlwdGlvbiIsImltYWdlIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiUG9wdXBXaWR0aERlbGV0ZSIsImRlbGV0ZUhhbmRsZXIiLCJfZGVsZXRlSGFuZGxlciIsImNhcmQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3IiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsIl9nZXRFcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJBcnJheSIsImZyb20iLCJfaGFzSW52YWxpZElucHV0IiwiX2lzVmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvUHJvbWlzZSIsImdldFVzZXJJbmZvIiwiaW5pdGlhbENhcmRzUHJvbWlzZSIsImdldEluaXRpYWxDYXJkcyIsInVzZXJJbmZvIiwiYXZhdGFyRWRpdFBvcHVwIiwicmVuZGVyTG9hZGluZyIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwic2V0QXZhdGFyIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImVkaXRQcm9maWxlUG9wdXAiLCJkYXRhIiwic2F2ZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhZGRQbGFjZVBvcHVwIiwic2F2ZUNhcmQiLCJyZXN1bHQiLCJhZGRUb1BsYWNlcyIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwiZGVsZXRlUGxhY2VQb3B1cCIsImRlbGV0ZUNhcmQiLCJpbWFnZVBvcHVwIiwiYXZhdGFyRWRpdEZvcm1WYWxpZGF0b3IiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRQbGFjZUZvcm1WYWxpZGF0b3IiLCJvcGVuIiwic2V0RGVsZXRlQ2FyZCIsImFkZExpa2UiLCJ1cGRhdGVMaWtlcyIsInJlbW92ZUxpa2UiLCJnZW5lcmF0ZUNhcmQiLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldEZvcm1WYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==